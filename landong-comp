import { Component, OnInit } from '@angular/core';
import { Router } from '@angular/router';
import { AuthService } from './auth.service';

@Component({
  selector: 'app-landing',
  template: `<p>Signing you in...</p>`
})
export class LandingComponent implements OnInit {
  constructor(private authService: AuthService, private router: Router) {}

  ngOnInit() {
    const account = this.authService.getAccount();

    if (account) {
      // Already signed in â†’ go to dashboard/home
      this.router.navigate(['/home']);
    } else {
      // Not signed in â†’ trigger SSO redirect
      this.authService.login();
    }
  }
}

const routes: Routes = [
  { path: '', component: LandingComponent }, // ðŸ”¥ no guard here
  { path: 'home', component: HomeComponent, canActivate: [AuthGuard] },
  { path: 'profile', component: ProfileComponent, canActivate: [AuthGuard] }
];

